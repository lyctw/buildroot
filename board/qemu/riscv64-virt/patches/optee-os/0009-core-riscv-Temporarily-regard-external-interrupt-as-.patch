From b7f4eeab4192cce3d036e48c2ae62cb9d2e4f52e Mon Sep 17 00:00:00 2001
From: Alvin Chang <alvinga@andestech.com>
Date: Tue, 5 Mar 2024 16:06:32 +0800
Subject: [PATCH 09/17] core: riscv: Temporarily regard external interrupt as
 foreign interrupt

Signed-off-by: Alvin Chang <alvinga@andestech.com>
---
 core/arch/riscv/kernel/thread_arch.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/core/arch/riscv/kernel/thread_arch.c b/core/arch/riscv/kernel/thread_arch.c
index 3d3c77f66..519dcb4ae 100644
--- a/core/arch/riscv/kernel/thread_arch.c
+++ b/core/arch/riscv/kernel/thread_arch.c
@@ -321,7 +321,7 @@ static void thread_interrupt_handler(unsigned long cause,
 		thread_unhandled_trap(regs, cause);
 		break;
 	case IRQ_XEXT:
-		thread_irq_handler();
+		thread_foreign_interrupt_handler(regs, user);
 		break;
 	default:
 		thread_unhandled_trap(regs, cause);
-- 
2.34.1

